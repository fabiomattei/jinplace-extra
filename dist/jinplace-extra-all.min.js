/*
 ALL PLUGINS INCLUDING EXPERIMENTAL ONES
 MIT Licence
*/
$.fn.jinplace.editors["extra:checkbox"]={blurAction:"ignore",makeField:function(c,d){var a;"["==d.charAt(0)&&(a=$.parseJSON(d));if(!a||2>a.length)a=["No","Yes"];this.choices=a;var b=$("<input type=checkbox>"),e=navigator.userAgent.match(/(ipad|ipod|iphone)/i),f=!1;b.on("click",function(a){a.stopPropagation()}).on("change",function(a){b.focus()});e&&(b.on("touchstart",function(a){f=!0;setTimeout(function(){f=!1},300)}),$(document).off("touchstart.jip").on("touchstart.jip",function(a){f||c.find("form").trigger("submit")}));
this.blurEvent(b,b,"submit");e=$.trim(c.text());b.attr("checked",e==a[1]);return b},value:function(){return this.inputField.prop("checked")?1:0},displayValue:function(c){return this.choices["0"!=c?1:0]},finish:function(){$(document).off("touchstart.jip")}};
$.fn.jinplace.editors["extra:checkbox_demo"]={blurAction:"ignore",makeField:function(c,d){var a=$("<label/>"),b=$('<input type="checkbox">');a.append(b);var e=$.trim(c.text()),f;f="["==d.charAt(0)?$.parseJSON(d):["No","Yes"];b.attr("checked",f[1]==e);e=$("<span>"+e+"</span>");a.append(e);this.choices=f;this.inputField=b;this.label=a;this.textNode=e;return a},activate:function(c,d){var a=this;d.focus();this.label.on("click",function(a){a.stopPropagation()}).on("change",function(c){c=a.inputField.prop("checked");
a.textNode.text(a.choices[c?1:0]);d.focus()});this.blurEvent(this.inputField,this.label,"submit")},value:function(){return this.inputField.prop("checked")?1:0},displayValue:function(c){return this.choices[c?1:0]}};
$.fn.jinplace.editors["extra:form"]={makeField:function(c,d){console.log("form make field");var a=c.clone(),b=a.find(".editable-field"),e=$.fn.jinplace.editors,f=$.fn.jinplace.editorBase;b.each(function(a,b){b=$(b);var d=b.attr("data-type")||"input";if(d=$.extend({},f,e[d])){var g=b.attr("data-data")||b.html();b.data("save-value",g);d=d.makeField(c,g);d.attr("name",b.attr("data-attribute"));b.html(d)}});return a},value:function(){console.log("form get value");var c={};$.each(this.inputField.serializeArray(),
function(d,a){c[a.name]=a.value});return c}};$.fn.jinplace.editors["extra:submit"]={makeField:function(c,d){var a=$("<input type=submit>");a.val("Go");a.attr("name",c.attr("data-attribute"));a.on("click",function(b){a.trigger("submit");return!1});return a}};
